<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="Web learning">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript,AJAX">
    <meta name="author" content="Ester Marsal Roca">
    <title>FINESTRA FILL</title>
  </head> 
  <body>
    <p><input type='button' value='TANCAR' id='bTancar'></p>
    <p><input type='button' value='MODIFICAR FINESTRA PARE' id='bEditar'></p>
    <p><input type='button' value='obrir finestra net' id='obrirNet'></p>
    <div id='valorsFF'></div>
    <p>Des de la sub - finestra es pot editar la finestra pare mitjançant la propietat: window opener</p>
    <p><img src='./windowsComunication.bmp'></p>
    <script>
    document.addEventListener('DOMContentLoaded',main);
	let fPare = window.opener;
    let fNet = null;
    function main()
    {
        document.getElementById('bTancar').addEventListener('click', function ()
        {
            window.close();
        });
        document.getElementById('bEditar').addEventListener('click',editar);
        document.getElementById('obrirNet').addEventListener('click',obrirFnet);
        window.addEventListener('beforeunload',tancarNets);
    }
     function editar()
     {
        fPare.document.getElementById('valors1').textContent = ' Passant informació ';
		window.opener.document.getElementById('valors1').style.color = 'blue';	
     }
     function obrirFnet()
     {
       if (fNet == null || fNet.closed)
                fNet = window.open('./finestraNet.html',"Finestreta","width=250,height=250");
            else
			{
                document.getElementById('valorsFF').textContent = 'Ja està oberta la finestra Net!';
				document.getElementById('valorsFF').style.color = 'Lime';
			}
     }
     function tancarNets()
     {
        if (fNet!=null && !fNet.closed)
            fNet.close();
        else
            valorsFF.innerHTML = "<span  style='color:red'>La subfinestra neta no es pot tancar, perquè no està oberta</span>";
     }
    </script>
</body>
</html>
